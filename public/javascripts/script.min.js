function request(e,t,n,u,d){var l=new XMLHttpRequest;l.onreadystatechange=function(){4==this.readyState&&200==this.status?null!=u&&u(this.responseText):this.status>=400&&this.status<=599&&null!=d&&d()},l.open(t,e,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.send(n)}function generateInfoClick(){if(isRequesting)return!0;isRequesting=!0,document.getElementById("result").className="hidden";var e=document.getElementById("youtubeUrlInput").value;return 0!=e.indexOf("https://www.youtube.com")&&0!=e.indexOf("https://youtube.com")?(document.getElementById("youtubeUrlInput").className=document.getElementById("youtubeUrlInput").className+" input-invalid",void(isRequesting=!1)):(document.getElementById("youtubeUrlInput").className=document.getElementById("youtubeUrlInput").className.replace(" input-invalid",""),document.getElementById("imgLoading").className="",void request("/ydl","POST","youtubeUrl="+e,function(e){if(isRequesting=!1,"error"==e)return isRequesting=!1,void(document.getElementById("cantGetVideo").className=document.getElementById("cantGetVideo").className.replace(" hidden",""));document.getElementById("cantGetVideo").className.indexOf("hidden")==-1&&(document.getElementById("cantGetVideo").className=document.getElementById("cantGetVideo").className+" hidden"),document.getElementById("result").className="";var t=JSON.parse(e);document.getElementById("videoInfo").value="Title: "+t.title+"\nAuthor: "+t.author+"\nView count: "+t.view_count,document.getElementById("videoImg").src=t.img;for(var n=t.links,u="",d={},l="",i=0,a=n.length;i<a;i++)null==d[n[i].quality]?(u+='<option value="'+i+'">'+n[i].quality+"</option>",d[n[i].quality]=1):(u+='<option value="'+i+'">'+n[i].quality+"_"+d[n[i].quality]+"</option>",d[n[i].quality]++),l+='<input type="hidden" id="hiddenLink_'+i+'" value="'+n[i].url+'" />';document.getElementById("qualitySelect").innerHTML=u,document.getElementById("resultHidden").innerHTML=l,setDownloadA(n[0].url,"aaa.mp4"),document.getElementById("imgLoading").className="hidden"},function(){document.getElementById("result").className="hidden",document.getElementById("imgLoading").className="hidden",isRequesting=!1}))}function setDownloadA(e,t){var n=document.getElementById("downloadA");n.url=!0,n.download=t,n.title=t}function qualitySelectChange(){var e=document.getElementById("qualitySelect").value,t=document.getElementById("hiddenLink_"+e).value;setDownloadA(t,"aaa.mp4")}function urlInputKeyPress(e){13==e.charCode&&document.getElementById("generateInfo").click()}function urlInputPaste(){setTimeout(function(){document.getElementById("generateInfo").click()},200)}var isRequesting=!1;