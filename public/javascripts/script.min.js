function request(e,t,n,d,i){var u=new XMLHttpRequest;u.onreadystatechange=function(){4==this.readyState&&200==this.status?null!=d&&d(this.responseText):this.status>=400&&this.status<=599&&null!=i&&i()},u.open(t,e,!0),u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.send(n)}function generateInfoClick(){if(isRequesting)return!0;isRequesting=!0,document.getElementById("result").className="hidden";var e=document.getElementById("youtubeUrlInput").value;return e.indexOf("youtube.com")!=-1?(document.getElementById("youtubeUrlInput").className=document.getElementById("youtubeUrlInput").className+" input-invalid",void(isRequesting=!1)):(document.getElementById("youtubeUrlInput").className=document.getElementById("youtubeUrlInput").className.replace(" input-invalid",""),document.getElementById("imgLoading").className="",ga("send","event",{eventCategory:"generateInfoClick",eventAction:"click"}),void request("/ydl","POST","youtubeUrl="+e,function(e){if(isRequesting=!1,"error"==e)return isRequesting=!1,void(document.getElementById("cantGetVideo").className=document.getElementById("cantGetVideo").className.replace(" hidden",""));document.getElementById("cantGetVideo").className.indexOf("hidden")==-1&&(document.getElementById("cantGetVideo").className=document.getElementById("cantGetVideo").className+" hidden"),document.getElementById("result").className="";var t=JSON.parse(e);document.getElementById("videoInfo").value="Title: "+t.title+"\nAuthor: "+t.author+"\nView count: "+t.view_count,document.getElementById("videoImg").src=t.img;for(var n=t.links,d="",i={},u="",l=0,a=n.length;l<a;l++)null==i[n[l].quality]?(d+='<option value="'+l+'">'+n[l].quality+"</option>",i[n[l].quality]=1):(d+='<option value="'+l+'">'+n[l].quality+"_"+i[n[l].quality]+"</option>",i[n[l].quality]++),u+='<input type="hidden" id="hiddenLink_'+l+'" value="'+n[l].url+'" />';u+='<input type="hidden" id="hiddenTitle_" value="'+t.title+'" />',document.getElementById("qualitySelect").innerHTML=d,document.getElementById("resultHidden").innerHTML=u,setDownloadA(n[0].url,t.title),document.getElementById("imgLoading").className="hidden"},function(){document.getElementById("result").className="hidden",document.getElementById("imgLoading").className="hidden",isRequesting=!1}))}function setDownloadA(e,t){var n=document.getElementById("downloadA");n.href=e,n.download=t,n.title=t}function qualitySelectChange(){var e=document.getElementById("qualitySelect").value,t=document.getElementById("hiddenLink_"+e).value,n=document.getElementById("hiddenTitle_").value;setDownloadA(t,n)}function urlInputKeyPress(e){13==e.charCode&&document.getElementById("generateInfo").click()}function urlInputPaste(){setTimeout(function(){document.getElementById("generateInfo").click()},200)}var isRequesting=!1;!function(e,t,n,d,i,u,l){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,u=t.createElement(n),l=t.getElementsByTagName(n)[0],u.async=1,u.src=d,l.parentNode.insertBefore(u,l)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-85518523-1","auto"),ga("send","pageview");