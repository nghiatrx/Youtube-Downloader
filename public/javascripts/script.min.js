function request(e,t,n,d,u){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==this.readyState&&200==this.status?null!=d&&d(this.responseText):this.status>=400&&this.status<=599&&null!=u&&u()},i.open(t,e,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(n)}function generateInfoClick(){if(isRequesting)return!0;isRequesting=!0,document.getElementById("result").className="hidden";var e=document.getElementById("youtubeUrlInput").value;return 0!=e.indexOf("https://www.youtube.com")&&0!=e.indexOf("https://youtube.com")?(document.getElementById("youtubeUrlInput").className=document.getElementById("youtubeUrlInput").className+" input-invalid",void(isRequesting=!1)):(document.getElementById("youtubeUrlInput").className=document.getElementById("youtubeUrlInput").className.replace(" input-invalid",""),document.getElementById("imgLoading").className="",void request("/ydl","POST","youtubeUrl="+e,function(e){if(isRequesting=!1,"error"==e)return isRequesting=!1,void(document.getElementById("cantGetVideo").className=document.getElementById("cantGetVideo").className.replace(" hidden",""));document.getElementById("cantGetVideo").className.indexOf("hidden")==-1&&(document.getElementById("cantGetVideo").className=document.getElementById("cantGetVideo").className+" hidden"),document.getElementById("result").className="";var t=JSON.parse(e);document.getElementById("videoInfo").value="Title: "+t.title+"\nAuthor: "+t.author+"\nView count: "+t.view_count,document.getElementById("videoImg").src=t.img;for(var n=t.links,d="",u={},i="",l=0,o=n.length;l<o;l++)null==u[n[l].quality]?(d+='<option value="'+l+'">'+n[l].quality+"</option>",u[n[l].quality]=1):(d+='<option value="'+l+'">'+n[l].quality+"_"+u[n[l].quality]+"</option>",u[n[l].quality]++),i+='<input type="hidden" id="hiddenLink_'+l+'" value="'+n[l].url+'" />';i+='<input type="hidden" id="hiddenTitle_" value="'+t.title+'" />',document.getElementById("qualitySelect").innerHTML=d,document.getElementById("resultHidden").innerHTML=i,setDownloadA(n[0].url,t.title),document.getElementById("imgLoading").className="hidden"},function(){document.getElementById("result").className="hidden",document.getElementById("imgLoading").className="hidden",isRequesting=!1}))}function setDownloadA(e,t){var n=document.getElementById("downloadA");n.href=e,n.download=t,n.title=t}function qualitySelectChange(){var e=document.getElementById("qualitySelect").value,t=document.getElementById("hiddenLink_"+e).value,n=document.getElementById("hiddenTitle_").value;setDownloadA(t,n)}function urlInputKeyPress(e){13==e.charCode&&document.getElementById("generateInfo").click()}function urlInputPaste(){setTimeout(function(){document.getElementById("generateInfo").click()},200)}var isRequesting=!1;