function request(e,t,n,d,u){var l=new XMLHttpRequest;l.onreadystatechange=function(){4==this.readyState&&200==this.status?null!=d&&d(this.responseText):this.status>=400&&this.status<=599&&null!=u&&u()},l.open(t,e,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.send(n)}function generateInfoClick(){if(isRequesting)return!0;isRequesting=!0,document.getElementById("result").className="hidden";var e=document.getElementById("youtubeUrlInput").value;return 0!=e.indexOf("https://www.youtube.com")&&0!=e.indexOf("https://youtube.com")?(document.getElementById("youtubeUrlInput").className=document.getElementById("youtubeUrlInput").className+" input-invalid",void(isRequesting=!1)):(document.getElementById("youtubeUrlInput").className=document.getElementById("youtubeUrlInput").className.replace(" input-invalid",""),document.getElementById("imgLoading").className="",void request("/ydl","POST","youtubeUrl="+e,function(e){if(isRequesting=!1,"error"==e)return isRequesting=!1,void(document.getElementById("cantGetVideo").className=document.getElementById("cantGetVideo").className.replace(" hidden",""));document.getElementById("cantGetVideo").className.indexOf("hidden")==-1&&(document.getElementById("cantGetVideo").className=document.getElementById("cantGetVideo").className+" hidden"),document.getElementById("result").className="";var t=JSON.parse(e);document.getElementById("videoInfo").value="Title: "+t.title+"\nAuthor: "+t.author+"\nView count: "+t.view_count,document.getElementById("videoImg").src=t.img;for(var n=t.links,d="",u={},l="",o=0,i=n.length;o<i;o++)null==u[n[o].quality]?(d+='<option value="'+o+'">'+n[o].quality+"</option>",u[n[o].quality]=1):(d+='<option value="'+o+'">'+n[o].quality+"_"+u[n[o].quality]+"</option>",u[n[o].quality]++),l+='<input type="hidden" id="hiddenLink_'+o+'" value="'+n[o].url+'" />';document.getElementById("qualitySelect").innerHTML=d,document.getElementById("resultHidden").innerHTML=l,document.getElementById("downloadA").href=n[0].url,document.getElementById("downloadA").download="",document.getElementById("imgLoading").className="hidden"},function(){document.getElementById("result").className="hidden",document.getElementById("imgLoading").className="hidden",isRequesting=!1}))}function qualitySelectChange(){var e=document.getElementById("qualitySelect").value,t=document.getElementById("hiddenLink_"+e).value;document.getElementById("downloadA").href=t,document.getElementById("downloadA").download=""}function urlInputKeyPress(e){13==e.charCode&&document.getElementById("generateInfo").click()}function urlInputPaste(){setTimeout(function(){document.getElementById("generateInfo").click()},200)}var isRequesting=!1;